<div class="o_cp_controller">
    <div class="o_control_panel">
        <ol class="breadcrumb">
            <li class="active">Kênh xã hội Facebook</li>
        </ol>
        <div class="o_cp_searchview">
            <div class="o_cp_searchview_group">
                <div class="o_searchview">
                    <input class="o_searchview_input" placeholder="Tìm kiếm theo tên.." type="text">
                </div>
            </div>
        </div>
        <div class="o_cp_left">
            <div class="o_cp_buttons">
                <div class="o_form_buttons_view">
                    <button *ngIf="!logged_in" type="button" class="btn btn-primary btn-sm" accesskey="c"
                        (click)="login()">
                        Đăng nhập Facebook
                    </button>
                    <button *ngIf="logged_in" type="button" class="btn btn-primary btn-sm" accesskey="c"
                        (click)="logout()">
                        Đăng xuất Facebook
                    </button>
                    <button *ngIf="logged_in && !selectedPage" type="button" class="btn btn-primary btn-sm"
                        accesskey="c" (click)="showModalAddConnect()">
                        Thêm kết nối
                    </button>
                    <button *ngIf="selectedPage" type="button" class="btn btn-light btn-sm" accesskey="c"
                        (click)="selectPage(null)">
                        Quay lại Danh sách Trang kết nối
                    </button>
                </div>
            </div>
        </div>
        <div class="o_cp_right">

        </div>
    </div>
</div>

<div class="pages card pages_connected" *ngIf="logged_in && !selectedPage">
    <b class="mid">Danh sách trang đang kết nối</b>
    <div class="card mid" *ngFor="let item of DataFanpagesConnected; let i = index" (click)="selectPage(item)">
        <table>
            <tr>
                <td width=1%>
                    <img src="{{item.picture}}" alt="">
                </td>
                <td style="text-align: left;">
                    <b>{{item.name}}</b>
                </td>
            </tr>
        </table>
    </div>
</div>

<div class="pages conversations" *ngIf="selectedPage">
    <table>
        <tr>
            <td>
                <div class="card list_Customers">
                    <div class="mid tag" *ngFor="let item of dataCustomer; let i = index"
                        [class.selected]="item === selectedCustomer" (click)="selectCustomer(item)">
                        <table>
                            <tr>
                                <td width=1%>
                                    <img class="avatar"
                                        src="{{item.picture}}" alt="">
                                </td>
                                <td style="text-align: left;">
                                    <b>{{item.name}}</b><br>
                                    <span>{{item.snippet}}</span>
                                </td>
                                <td width=1%>
                                    <span>{{item.updated_time | date: 'dd/MM/yyyy'}}</span>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
            </td>
            <td *ngIf="!selectedCustomer">
                <div class="card">
                    <h2 class="mid" style="margin-top: 20%;">Chào mừng bạn đến với<b> Kênh Facebook</b></h2>
                    <p class="mid">Chọn hội thoại từ danh sách để bắt đầu</p>
                    <div class="mid card">
                        <table>
                            <tr>
                                <td width=1%>
                                    <img class="avatar"
                                        src="{{selectedPage.picture}}" alt="">
                                </td>
                                <td style="text-align: left;">
                                    <b style="margin-left: 10px; margin-right: 10px;">{{selectedPage.name}}</b>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
            </td>
            <td *ngIf="selectedCustomer">
                <div class="card messenger">
                    <div class="card messenger_box">
                        <table>
                            <tr>
                                <td width=1%>
                                    <img class="avatar_mini"
                                        src="{{selectedCustomer.picture}}" alt="">
                                </td>
                                <td style="text-align: left;">
                                    Hello This is Test 1!
                                </td>
                            </tr>
                        </table>
                        <div class="" style="text-align: right;">
                            Hello This is Test 2!
                        </div>
                        <table>
                            <tr>
                                <td></td>
                                <td style="text-align: left;">
                                    Hello This is Test 3!
                                </td>
                            </tr>
                            <tr>
                                <td></td>
                                <td style="text-align: left;">
                                    Hello This is Test 4!
                                </td>
                            </tr>
                            <tr>
                                <td width=1%>
                                    <img class="avatar_mini"
                                        src="{{selectedCustomer.picture}}" alt="">
                                </td>
                                <td style="text-align: left;">
                                    Hello This is Test 5!
                                </td>
                            </tr>
                        </table>
                    </div>
                    <div class="card messenger_input">
                        <table style="width: 100%; height: 100%;">
                            <tr>
                                <td style="width: 1%; white-space: nowrap;">
                                    <i class="fas fa-plus-circle"></i>
                                    <i class="fas fa-images"></i>
                                    <i class="fas fa-file"></i>
                                </td>
                                <td>
                                    <input type="text" name="" id="" placeholder="Nhập tin nhắn...">
                                </td>
                                <td width=1%>
                                    <i class="fas fa-heart"></i>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
            </td>
            <td *ngIf="selectedCustomer">
                <div class="card detail_Customer">
                    <img class="mid avatar" src="{{selectedCustomer.picture}}" alt="">
                    <table class="mid">
                        <tr>
                            <td>
                                <b *ngIf="!selectCustomer.editing_name">{{selectedCustomer.name}}</b>
                                <input *ngIf="selectCustomer.editing_name" type="text" name="" id="" [(ngModel)]="selectedCustomer.name">
                            </td>
                            <td>
                                <button *ngIf="!selectCustomer.editing_name" type="button" class="btn btn-light myBtnEdit"
                                    (click)="selectCustomer.editing_name = true"><i class="fas fa-pencil-alt"></i></button>
                                <button *ngIf="selectCustomer.editing_name" type="button" class="btn btn-light myBtnEdit"
                                    (click)="selectCustomer.editing_name = false"><i class="fas fa-times"></i></button>
                            </td>
                        </tr>
                    </table>
                    <table class="mid">
                        <tr>
                            <td>
                                <span *ngIf="!selectCustomer.editing_phone">{{selectedCustomer.phone ? selectedCustomer.phone : 'Chưa có số điện thoại'}}</span>
                                <input *ngIf="selectCustomer.editing_phone" type="number" name="" id="" placeholder="Chưa có số điện thoại"
                                    [(ngModel)]="selectedCustomer.phone">
                            </td>
                            <td>
                                <button *ngIf="!selectCustomer.editing_phone" type="button" class="btn btn-light myBtnEdit"
                                    (click)="selectCustomer.editing_phone = true"><i class="fas fa-pencil-alt"></i></button>
                                <button *ngIf="selectCustomer.editing_phone" type="button" class="btn btn-light myBtnEdit"
                                    (click)="selectCustomer.editing_phone = false"><i class="fas fa-times"></i></button>
                            </td>
                        </tr>
                    </table>
                </div>
            </td>
        </tr>
    </table>
</div>