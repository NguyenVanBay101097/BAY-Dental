<div class="o_cp_controller">
    <div class="o_control_panel">
        <ol class="breadcrumb">
            <li class="active">{{title}}</li>
        </ol>
        <div class="o_cp_searchview">
        </div>
        <div class="o_cp_left">
            <div class="o_cp_buttons">
                <div class="o_form_buttons_view">
                    <!-- <button class="btn btn-primary mr-2 btn-sm" (click)="changeWeekMonth('weeks')"
                        accesskey="c">Tuần</button> -->
                    <!-- <button class="btn btn-primary btn-sm" (click)="changeWeekMonth('months')"
                        accesskey="c">Tháng</button> -->
                </div>
            </div>
            <div class="o_cp_sidebar">
            </div>
        </div>
        <div class="o_cp_right">
        </div>
    </div>
</div>

<div class="o_content">
    <div ngbDropdown class="d-inline-flex mr-2 float-right pb-2">
        <button class="btn btn-outline-primary btn-sm" id="dropdownBasic1" ngbDropdownToggle><i
                class="fas fa-cog"></i></button>
        <div ngbDropdownMenu aria-labelledby="dropdownBasic1">
            <button (click)="setupTimeKeeping()" ngbDropdownItem>Cài đặt</button>
        </div>
    </div>
    <div class="float-right pb-2">
        <div class="d-inline-flex">
            <button class="btn btn-outline-primary mr-3 btn-sm">Xuất file <i class="fas fa-file-export"></i></button>
        </div>
    </div>
    <div class="float-right pb-2 mr-3">
        <app-tai-date-range-filter-dropdown [dateFrom]="monthStart" (searchChange)="buttonFilterMonth($event)"
            [title]="'Thời gian'" [dateTo]="monthEnd"></app-tai-date-range-filter-dropdown>
    </div>
    <table class="table table-bordered table-content">
        <thead>
            <tr>
                <th *ngIf="flag" colspan="32" scope="col">
                    <button class="btn btn-secondary btn-sm" (click)="previousMonthFilter(filterMonth)">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <span class="title_month">Tháng {{filterMonth | date:'MM - yyyy'}}</span>
                    <button class="btn btn-secondary btn-sm" (click)="nextMonthFilter(filterMonth)">
                        <i class="fas fa-chevron-right"></i>
                    </button>

                    <div class="float-right">
                        <span class="mr-4 text-success">
                            <i class="fas fa-circle mt-2 mr-1 "></i>
                            <span class="pr-3"></span>
                            Hoàn thành
                        </span>
                        <span class="mr-4 text-primary">
                            <i class="fas fa-circle mt-2 mr-1"></i>
                            <span class="pr-3"></span>
                            Vào/ra
                        </span>
                        <span class="mr-4 text-warning">
                            <i class="fas fa-circle mt-2 mr-1 "></i>
                            <span class="pr-3"></span>
                            Chưa chấm
                        </span>
                    </div>
                </th>
                <!-- <th *ngIf="!flag" colspan="31" scope="col">
                    <button class="btn btn-primary btn-sm" (click)="previousWeekFilter()">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    Tháng {{filterMonth | date:'MM - yyyy'}}
                    <button class="btn btn-primary btn-sm" (click)="nextWeekFilter()"><i
                            class="fas fa-chevron-right"></i></button>
                </th> -->
            </tr>
            <tr>
                <th class="align-self-center" scope="col">Tên Nhân viên</th>
                <th scope="col" *ngFor="let date of dateList">
                    <div class="o_kanban_header">
                        <div class="o_kanban_header_title" *ngIf="date.toDateString() != today.toDateString()">
                            <span class="o_column_title">{{date | date: 'EE'}}</span>
                            <span class="o_column_title"> {{date | date: 'dd'}}</span>
                        </div>
                        <div class="o_kanban_header_title text-success"
                            *ngIf="date.toDateString() == today.toDateString()">
                            <span class="o_column_title">{{date | date: 'EE'}}</span>
                            <span class="o_column_title"> {{date | date: 'dd'}}</span>
                        </div>
                    </div>
                </th>

            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let empl of listEmployeies">
                <th scope="row" style="min-width: 170px;">{{empl.name}}</th>
                <td *ngFor="let date of this.listTimeSheetByEmpId[empl.id]"
                    (click)="clickTimeSheetCreate(date.date,empl)">
                    <div class="oe_kanban_content">
                        <div class="oe_kanban_timekepping">
                            <span *ngFor="let cc of date.chamCongs"
                                (click)="clickTimeSheet($event, cc.id, date.date, empl)">
                                <i title="Đã chấm giờ vào và giờ ra" *ngIf="cc.status == 'done'"
                                    class="fas fa-circle text-success"></i>
                                <i title="Đã chấm giờ vào hoặc giờ ra" *ngIf="cc.status == 'process'"
                                    class="fas fa-circle text-primary"></i>
                            </span>
                            <span *ngIf="date.chamCongs.length == 0 && today >= date.date">
                                <i title="Chưa chấm công" class="fas fa-circle text-warning"></i>
                            </span>
                        </div>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>

</div>