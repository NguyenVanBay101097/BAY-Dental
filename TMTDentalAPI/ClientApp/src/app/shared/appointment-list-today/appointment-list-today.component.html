<div class="header-title pb-3">THEO DÕI KHÁCH HÀNG TẠI PHÒNG KHÁM</div>
<div>
    <div class="d-flex">
        <div *ngIf="loading;else other_content">
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" [(ngModel)]="stateFilter"
                    (change)="onChangeOverState($event.target.value)" id="all" value="all">
                <label class="form-check-label-radio" for="all">Tổng hẹn
                    (0)</label>
            </div>
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" [(ngModel)]="stateFilter"
                    (change)="onChangeOverState($event.target.value)" id="confirmed" value="confirmed">
                <label class="form-check-label-radio" for="confirmed">Đang hẹn
                    (0)</label>
            </div>
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" [(ngModel)]="stateFilter"
                    (change)="onChangeOverState($event.target.value)" id="waiting" value="waiting">
                <label class="form-check-label-radio" for="waiting">Đang chờ
                    (0)</label>
            </div>
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" [(ngModel)]="stateFilter"
                    (change)="onChangeOverState($event.target.value)" id="examination" value="examination">
                <label class="form-check-label-radio" for="examination">Đang khám
                    (0)</label>
            </div>
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" [(ngModel)]="stateFilter"
                    (change)="onChangeOverState($event.target.value)" id="done" value="done">
                <label class="form-check-label-radio" for="done">Hoàn thành
                    (0)</label>
            </div>
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" [(ngModel)]="stateFilter"
                    (change)="onChangeOverState($event.target.value)" id="cancel" value="cancel">
                <label class="form-check-label-radio" for="cancel">Hủy hẹn
                    (0)</label>
            </div>
        </div>
        <ng-template #other_content>
            <div class="form-check form-check-inline" *ngFor="let item of stateFilterOptions ; let i = index">
                <input class="form-check-input" type="radio" [(ngModel)]="stateFilter"
                    (change)="onChangeOverState(item.state)" id="{{item.state}}" [value]="item.state">
                <label class="form-check-label-radio" for="{{item.state}}">{{stateGet(item.state)}}
                    ({{item.count}})</label>
            </div>
        </ng-template>
    </div>
</div>
<div>
    <kendo-grid [height]="300" [resizable]="true" [data]="gridData" [loading]="loading" [sortable]="true"
        (pageChange)="pageChange($event)">
        <!-- <ng-template kendoGridToolbarTemplate>          
        </ng-template> -->
        <kendo-grid-column title="Khách hàng" width="120">
            <ng-template kendoGridCellTemplate let-dataItem>
                <div>
                    <a class="text-primary" title="Xem hồ sơ khách hàng"
                        [routerLink]="['/partners/customer/' + dataItem.partnerId]">
                        <span> {{dataItem.partnerDisplayName}}</span>
                    </a>
                </div>

            </ng-template>
        </kendo-grid-column>
        <!-- <kendo-grid-column title="Mã lịch hẹn" width="80">
            <ng-template kendoGridCellTemplate let-dataItem>
                {{dataItem.name}}
            </ng-template>
        </kendo-grid-column> -->
        <kendo-grid-column title="Thời gian hẹn" width="50">
            <ng-template kendoGridCellTemplate let-dataItem>
                {{dataItem.time}}
            </ng-template>
        </kendo-grid-column>
        <kendo-grid-column title="Ngày hẹn" width="80">
            <ng-template kendoGridCellTemplate let-dataItem>
                {{dataItem.date | date: 'shortDate'}}
            </ng-template>
        </kendo-grid-column>
        <kendo-grid-column title="Số điện thoại" width="100">
            <ng-template kendoGridCellTemplate let-dataItem>
                {{dataItem.partnerPhone}}
            </ng-template>
        </kendo-grid-column>
        <kendo-grid-column title="Bác sĩ" width="80">
            <ng-template kendoGridCellTemplate let-dataItem>
                {{dataItem.doctorName}}
            </ng-template>
        </kendo-grid-column>
        <kendo-grid-column title="Nội dung" width="120">
            <ng-template kendoGridCellTemplate let-dataItem>
                {{dataItem.note}}
            </ng-template>
        </kendo-grid-column>
        <kendo-grid-column title="Trạng thái" width="100">
            <ng-template kendoGridCellTemplate let-dataItem>
                <div class="align-items-center ">
                    <span class="align-items-">
                        {{stateGet(dataItem.state)}}
                    </span>
                    <app-popover-state-appointment [item]="dataItem" class="ml-3"
                        (stateFormGroup)="onChangeState(dataItem.id,$event)">
                    </app-popover-state-appointment>

                </div>

            </ng-template>
        </kendo-grid-column>
        <!-- <kendo-grid-column field="id" width="50">
            <ng-template kendoGridHeaderTemplate let-column let-columnIndex="columnIndex">
                Thao tác
            </ng-template>
            <ng-template kendoGridCellTemplate let-dataItem let-rowIndex="rowIndex">
            
                   
            </ng-template>
        </kendo-grid-column> -->
    </kendo-grid>
</div>