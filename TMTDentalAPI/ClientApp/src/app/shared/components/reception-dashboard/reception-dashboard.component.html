<div class="w-100 h-100 d-flex flex-column bg-white p-3">
    <div class="w-100 h-35 d-flex overflow-hidden">
        <div class="h-100 w-35 pr-4">
            <div class="h-10 w-100 header-title">TRUY CẬP NHANH</div>
            <div class="h-90 w-100">
                <div class="d-flex h-50 w-100">
                    <div class="w-50 pt-3 pb-3 pr-3">
                        <div [routerLink]="['/appointments/kanban']" class="btn btn-primary p-3 w-100 h-100 d-flex">
                            <div class="image">
                                <img src="./assets/images/icons-tdental/calendar.png" alt="Lịch hẹn">
                            </div>
                            <div class="title">
                                LỊCH HẸN
                            </div>
                        </div>
                    </div>
                    <div class="w-50 pt-3 pb-3 pr-3 ">
                        <div [routerLink]="['/partners/customers']" class="btn btn-primary p-3 w-100 h-100 d-flex">
                            <div class="image">
                                <img src="./assets/images/icons-tdental/KH.png" alt="Lịch hẹn">
                            </div>
                            <div class="title">
                                KHÁCH HÀNG
                            </div>
                        </div>
                    </div>
                </div>
                <div class="d-flex h-50 w-100">
                    <div class="w-50 pt-3 pb-3 pr-3">
                        <div [routerLink]="['/purchase/orders/create']" class="btn btn-primary p-3 w-100 h-100 d-flex">
                            <div class="image">
                                <img src="./assets/images/icons-tdental/add-labo.png" alt="Lịch hẹn">
                            </div>
                            <div class="title">
                                MUA HÀNG
                            </div>
                        </div>
                    </div>
                    <div class="w-50 pt-3 pb-3 pr-3">
                        <div [routerLink]="['/']" class="btn btn-primary p-3 w-100 h-100 d-flex">
                            <div class="image">
                                <img src="./assets/images/icons-tdental/pdt-n.png" alt="Lịch hẹn">
                            </div>
                            <div class="title">
                                PHIẾU ĐIỀU TRỊ NHANH
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="h-100 w-65 pl-4">
            <div class="h-10 w-100 header-title">BÁO CÁO HÔM NAY</div>
            <div class="h-45 w-100 d-flex justify-content-between pt-3 pb-3 ">
                <div class="w-30 p-3-cu d-flex flex-column text-center border border-secondary rounded overflow-hidden">
                    <span class="font-weight-bold">DOANH THU</span>
                    <h4 class="text-primary">{{(saleReport ? saleReport.priceTotal : 0) | number}}</h4>
                </div>
                <div class="w-30 p-3-cu d-flex flex-column text-center border border-secondary rounded overflow-hidden">
                    <span class="font-weight-bold">DỊCH VỤ</span>
                    <h4 class="text-primary">{{(totalService ? totalService : 0) | number}}</h4>
                </div>
                <div class="w-30 p-3-cu d-flex flex-column text-center border border-secondary rounded overflow-hidden">
                    <span class="font-weight-bold">TIỀN MẶT</span>
                    <h4 class="text-primary">{{(reportValue ? reportValue.balance : 0) | number}}</h4>
                </div>
            </div>
            <div class="h-45 w-100 d-flex justify-content-between pt-3 pb-3">
                <div class="w-30 p-3-cu d-flex text-center border border-secondary rounded overflow-hidden">
                    <div class="w-50 h-100">
                        <span class="font-weight-bold">LABO TỚI HẸN</span>
                        <h4 class="text-primary">
                            {{laboOrderReport ? laboOrderReport.laboReceived : 0}}
                        </h4>
                    </div>
                    <div class="w-50 h-100">
                        <span class="font-weight-bold">LABO TỚI NHẬN</span>
                        <h4 class="text-primary">
                            {{laboOrderReport ? laboOrderReport.laboAppointment : 0}}
                        </h4>
                    </div>
                </div>
                <div class="w-30 p-3-cu d-flex text-center border border-secondary rounded overflow-hidden">
                    <div class="w-50 h-100">
                        <span class="font-weight-bold">KHÁCH MỚI</span>
                        <h4 class="text-primary">
                            {{customerReport ? customerReport.customerNew : 0}}
                        </h4>
                    </div>
                    <div class="w-50 h-100">
                        <span class="font-weight-bold">KHÁCH CŨ</span>
                        <h4 class="text-primary">
                            {{customerReport ? customerReport.customerOld : 0}}
                        </h4>
                    </div>
                </div>
                <div class="w-30 p-3-cu d-flex text-center border border-secondary rounded overflow-hidden">
                    <div class="w-50 h-100">
                        <span class="font-weight-bold">TỔNG LỊCH HẸN</span>
                        <h4 class="text-primary">
                            {{appointmentStateCount.all ? appointmentStateCount.all : 0}}/{{appointmentStateCount.done ? appointmentStateCount.done : 0}}
                        </h4>
                    </div>
                    <div class="w-50 h-100">
                        <span class="font-weight-bold">LỊCH HẸN ĐÃ TỚI</span>
                        <h4 class="text-primary">
                            {{appointmentStateCount.all ? appointmentStateCount.all : 0}}/{{appointmentStateCount.done ? appointmentStateCount.done : 0}}
                        </h4>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="w-100 h-65 pt-2 overflow-hidden">
        <div class="d-flex flex-column h-100">
            <div class="h-10 w-100 header-title">DỊCH VỤ TRONG NGÀY</div>
            <kendo-grid class="h-90 w-100" [resizable]="true" [kendoGridBinding]="gridView" [sortable]="true"
                (dataStateChange)="dataStateChange($event)" [loading]="loading">
                <ng-template kendoGridToolbarTemplate>
                    <div class="d-flex w-100">
                        <div class="input-group w-50">
                            <div class="input-group-prepend">
                                <span class="input-group-text" id="basic-addon1"><i class="fas fa-search"></i></span>
                            </div>
                            <input type="text" class="form-control" kendoTextBox (input)="onFilter($event.target.value)"
                                placeholder="Tìm kiếm nhanh" aria-label="Username" aria-describedby="basic-addon1">
                        </div>
                        <button (click)="exportServiceExcelFile()" type="button"
                            class="ml-3 btn float-right btn-primary btn-sm"><i class="far fa-file-excel"></i> Xuất
                            Excel</button>
                    </div>
                </ng-template>
                <kendo-grid-column [headerClass]="{'text-center font-weight-bold':true}" field="order.name"
                    title="Phiếu điều trị" class="text-center" width="170">
                    <ng-template kendoGridCellTemplate let-dataItem>
                        <a class="text-primary cursor-pointer" title="Chuyển đến phiếu điều trị "
                            (click)="redirectSaleOrder(dataItem.order)">{{dataItem.order.name}}</a>
                    </ng-template>
                </kendo-grid-column>
                <kendo-grid-column [headerClass]="{'font-weight-bold':true}" field="orderPartner.displayName"
                    title="Khách hàng">
                </kendo-grid-column>
                <kendo-grid-column [headerClass]="{'font-weight-bold':true}" field="employee.name" title="Bác sĩ">
                </kendo-grid-column>
                <kendo-grid-column [headerClass]="{'font-weight-bold':true}" field="teeth" title="Răng">
                    <ng-template kendoGridCellTemplate let-dataItem>
                        <span *ngFor="let teeth of dataItem.teeth">{{teeth.name}}, </span>
                    </ng-template>
                </kendo-grid-column>
                <kendo-grid-column [headerClass]="{'font-weight-bold':true}" field="diagnostic" title="Chuẩn đoán">
                </kendo-grid-column>
                <kendo-grid-column [headerClass]="{'font-weight-bold':true}" field="name" title="Dịch vụ">
                </kendo-grid-column>
                <kendo-grid-column [headerClass]="{'font-weight-bold':true}" field="priceSubTotal" class="text-right"
                    title="Thành tiền">
                    <ng-template kendoGridCellTemplate let-dataItem>
                        {{dataItem.priceSubTotal | number}}
                    </ng-template>

                </kendo-grid-column>
                <kendo-grid-column [headerClass]="{'font-weight-bold':true}" field="amount" class="text-right"
                    title="Thanh toán">
                    <ng-template kendoGridCellTemplate let-dataItem>
                        {{(dataItem.priceSubTotal - dataItem.amountResidual) | number}}
                    </ng-template>
                </kendo-grid-column>
                <kendo-grid-column [headerClass]="{'font-weight-bold':true}" class="text-right" field="amountResidual"
                    title="Còn lại">
                    <ng-template kendoGridCellTemplate let-dataItem>
                        {{dataItem.amountResidual | number}}
                    </ng-template>
                </kendo-grid-column>
                <kendo-grid-column class="text-center" [headerClass]="{'text-center font-weight-bold':true}"
                    field="order.state" title="Trạng thái">
                    <ng-template kendoGridCellTemplate let-dataItem>
                        <span *ngIf="dataItem.order.state=='sale'">
                            Đang điều trị
                        </span>
                        <span *ngIf="dataItem.order.state=='done'">
                            Hoàn thành
                        </span>
                    </ng-template>
                </kendo-grid-column>
                <kendo-grid-excel fileName="Danh_sach_dich_vu.xlsx"></kendo-grid-excel>
            </kendo-grid>
        </div>
    </div>
</div>