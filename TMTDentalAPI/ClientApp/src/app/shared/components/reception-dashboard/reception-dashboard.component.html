<div class="t_wrapper">
    <div class="row mb-3">
        <div class="col-4">
            <div>
                <h4 class="header-title">TRUY CẬP NHANH</h4>
                <div class="t_kanban">
                    <a [routerLink]="['/appointments/kanban']" class="card bg-primary t_card">
                        <div class="card-body">
                            <div class="d-flex">
                                <img class="image-custom" src="./assets/images/icons-tdental/calendar.png"
                                    alt="Lịch hẹn">
                                <span class="title-custom">LỊCH HẸN</span>
                            </div>
                        </div>
                    </a>
                    <a [routerLink]="['/partners/customers']" class="card bg-primary t_card">
                        <div class="card-body">
                            <div class="d-flex">
                                <img class="image-custom" src="./assets/images/icons-tdental/KH.png" alt="Lịch hẹn">
                                <span class="title-custom"> KHÁCH HÀNG</span>
                            </div>
                        </div>
                    </a>
                    <a [routerLink]="['/purchase/orders/create']" [queryParams]="{type: 'order'}" class="card bg-primary t_card">
                        <div class="card-body">
                            <div class="d-flex">
                                <img class="image-custom" src="./assets/images/icons-tdental/cart.png" alt="Lịch hẹn">
                                <span class="title-custom">TẠO MUA HÀNG</span>
                            </div>
                        </div>
                    </a>
                    <a [routerLink]="['/partners/treatment-paymentfast/from']" class="card bg-primary t_card">
                        <div class="card-body">
                            <div class="d-flex">
                                <img class="image-custom" src="./assets/images/icons-tdental/pdt-n.png" alt="Điều trị nhanh">
                                <span class="title-custom">PHIẾU ĐIỀU TRỊ NHANH</span>
                            </div>
                        </div>
                    </a>
                </div>
            </div>
        </div>
        <div class="col-8">
            <div>
                <h4 class="header-title">BÁO CÁO HÔM NAY</h4>
                <div class="t_kanban">
                    <div class="card t_card_right border-secondary">
                        <div class="card-body">
                            <div class="d-flex">
                                <div class="t_report_item">
                                    <span class="font-weight-bold">DOANH THU</span>
                                    <h4 class="text-primary">{{(saleReport ? saleReport.priceTotal : 0) | number}}</h4>
                                </div>
                                <div class="t_report_item">
                                    <span class="font-weight-bold">DỊCH VỤ</span>
                                    <h4 class="text-primary">{{(totalService ? totalService : 0) | number}}</h4>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="card t_card_right border-secondary">
                        <div class="card-body">
                            <div class="text-center">
                                <span class="font-weight-bold">TIỀN MẶT</span>
                                <h4 class="text-primary">{{(reportValue ? reportValue.balance : 0) | number}}</h4>
                            </div>
                        </div>
                    </div>
                    <div class="card t_card_right border-secondary">
                        <div class="card-body">
                            <div class="d-flex">
                                <div class="t_report_item">
                                    <span class="font-weight-bold">LABO TỚI HẸN</span>
                                    <h4 class="text-primary">
                                        {{laboOrderReport ? laboOrderReport.laboReceived : 0}}
                                    </h4>
                                </div>
                                <div class="t_report_item">
                                    <span class="font-weight-bold">LABO TỚI NHẬN</span>
                                    <h4 class="text-primary">
                                        {{laboOrderReport ? laboOrderReport.laboAppointment : 0}}
                                    </h4>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="card t_card_right border-secondary">
                        <div class="card-body">
                            <div class="d-flex">
                                <div class="t_report_item">
                                    <span class="font-weight-bold">KHÁCH HÀNG MỚI</span>
                                    <h4 class="text-primary">
                                        {{customerReport ? customerReport.customerNew : 0}}
                                    </h4>
                                </div>
                                <div class="t_report_item">
                                    <span class="font-weight-bold">KHÁCH HÀNG CŨ</span>
                                    <h4 class="text-primary">
                                        {{customerReport ? customerReport.customerOld : 0}}
                                    </h4>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="card t_card_right border-secondary">
                        <div class="card-body">
                            <div class="d-flex">
                                <div class="t_report_item">
                                    <span class="font-weight-bold">TỔNG LỊCH HẸN</span>
                                    <h4 class="text-primary">
                                        {{appointmentStateCount.all ? appointmentStateCount.all : 0}}
                                    </h4>
                                </div>
                                <div class="t_report_item">
                                    <span class="font-weight-bold">LỊCH HẸN ĐÃ TỚI</span>
                                    <h4 class="text-primary">
                                        {{appointmentStateCount.done ? appointmentStateCount.done : 0}}
                                    </h4>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="t_card_right t_card_ghost"></div>
                </div>
            </div>
        </div>
    </div>
    <div>
        <div class="header-title pb-3">DỊCH VỤ TRONG NGÀY</div>
        <kendo-grid [height]="500" [resizable]="true" [kendoGridBinding]="gridView" [sortable]="true"
            (dataStateChange)="dataStateChange($event)">
            <ng-template kendoGridToolbarTemplate>
                <div class="d-flex">
                    <div class="input-group w-50">
                        <div class="input-group-prepend">
                            <span class="input-group-text" id="basic-addon1"><i class="fas fa-search"></i></span>
                        </div>
                        <input type="text" class="form-control" kendoTextBox (input)="onFilter($event.target.value)"
                            placeholder="Tìm kiếm nhanh" aria-label="Username" aria-describedby="basic-addon1">
                    </div>
                    <button (click)="exportServiceExcelFile()" type="button"
                        class="ml-3 btn float-right btn-primary btn-sm"><i class="far fa-file-excel"></i> Xuất
                        Excel</button>
                </div>
            </ng-template>
            <kendo-grid-column [headerClass]="{'text-center font-weight-bold':true}" field="order.name"
                title="Phiếu điều trị" class="text-center" width="150">
                <ng-template kendoGridCellTemplate let-dataItem>
                    <a class="text-primary cursor-pointer" title="Chuyển đến phiếu điều trị "
                        (click)="redirectSaleOrder(dataItem.order)">{{dataItem.order.name}}</a>
                </ng-template>
            </kendo-grid-column>
            <kendo-grid-column [headerClass]="{'font-weight-bold':true}" field="orderPartner.displayName"
                title="Khách hàng" width="150">
            </kendo-grid-column>
            <kendo-grid-column [headerClass]="{'font-weight-bold':true}" field="employee.name" title="Bác sĩ" width="150">
            </kendo-grid-column>
            <kendo-grid-column [headerClass]="{'font-weight-bold':true}" field="teeth" title="Răng" width="120">
                <ng-template kendoGridCellTemplate let-dataItem>
                    {{getTeethDisplay(dataItem.teeth)}}
                </ng-template>
            </kendo-grid-column>
            <kendo-grid-column [headerClass]="{'font-weight-bold':true}" field="diagnostic" title="Chuẩn đoán" width="150">
            </kendo-grid-column>
            <kendo-grid-column [headerClass]="{'font-weight-bold':true}" field="name" title="Dịch vụ" width="150">
            </kendo-grid-column>
            <kendo-grid-column [headerClass]="{'font-weight-bold':true}" field="priceSubTotal" class="text-right"
                title="Thành tiền" width="150">
                <ng-template kendoGridCellTemplate let-dataItem>
                    {{dataItem.priceSubTotal | number}}
                </ng-template>

            </kendo-grid-column>
            <kendo-grid-column [headerClass]="{'font-weight-bold':true}" field="amount" class="text-right"
                title="Thanh toán" width="150">
                <ng-template kendoGridCellTemplate let-dataItem>
                    {{(dataItem.priceSubTotal - dataItem.amountResidual) | number}}
                </ng-template>
            </kendo-grid-column>
            <kendo-grid-column [headerClass]="{'font-weight-bold':true}" class="text-right" field="amountResidual"
                title="Còn lại" width="150">
                <ng-template kendoGridCellTemplate let-dataItem>
                    {{dataItem.amountResidual | number}}
                </ng-template>
            </kendo-grid-column>
            <kendo-grid-column class="text-center" [headerClass]="{'text-center font-weight-bold':true}"
                field="order.state" title="Trạng thái" width="150">
                <ng-template kendoGridCellTemplate let-dataItem>
                    {{getStateDisplay(dataItem.state)}}
                </ng-template>
            </kendo-grid-column>
            <kendo-grid-excel fileName="Danh_sach_dich_vu.xlsx"></kendo-grid-excel>
        </kendo-grid>
    </div>
</div>