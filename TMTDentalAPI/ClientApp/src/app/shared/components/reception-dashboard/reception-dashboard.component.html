<div class="w-100 h-100 d-flex flex-column bg-white p-3">
    <div class="w-100 h-35 d-flex">
        <div class="h-100 w-40 pr-3">
            <h4 class="font-weight-bold">TRUY CẬP NHANH</h4>
            <div class="d-flex border-bottom border-secondary my-3 pb-3">
                <div class="w-50 pr-3">
                    <a [routerLink]="['/appointments/kanban']" class="btn btn-primary w-100 h-100">
                        <i class="far fa-calendar-alt"></i>
                        Lịch hẹn
                    </a>
                </div>
                <div class="w-50 pl-3">
                    <a [routerLink]="['/partners/customers']" class="btn btn-primary w-100 h-100">
                        <i class="far fa-address-book"></i>
                        Khách hàng
                    </a>
                </div>
            </div>
            <div class="d-flex border-bottom border-secondary my-3 pb-3">
                <div class="w-50 pr-3">
                    <a [routerLink]="['/purchase/orders/create']" [queryParams]="{type: 'order'}"
                        class="btn btn-primary w-100 h-100">
                        Mua hàng
                    </a>
                </div>
                <div class="w-50 pl-3">
                    <a [routerLink]="['/']" class="btn btn-primary w-100 h-100">
                        Phiếu Điều trị nhanh
                    </a>
                </div>
            </div>
            <!-- <div class="d-flex border-bottom border-secondary my-3 pb-3">
                <div class="w-50 pr-3">
                    <a [routerLink]="['/time-keepings']" class="btn btn-primary w-100 h-100">
                        Chấm công
                    </a>
                </div>
                <div class="w-50 pl-3">
                    <a [routerLink]="['/']" class="btn btn-primary w-100 h-100">
                        Tạo phiếu labo
                    </a>
                </div>
            </div> -->
        </div>
        <div class="h-100 w-60 border border-secondary p-3">
            <div class="h-10 w-100 title">
                <h4 class="font-weight-bold">BÁO CÁO HÔM NAY</h4>
            </div>
            <div class="h-40 w-100 d-flex justify-content-between my-3">
                <div class="w-30 d-flex flex-column text-center border border-secondary rounded py-2">
                    <span>DOANH THU</span>
                    <h4>{{(saleReport ? saleReport.priceTotal : 0) | number}}</h4>
                </div>
                <div class="w-30 d-flex flex-column text-center border border-secondary rounded py-2">
                    <span>DỊCH VỤ</span>
                    <h4>{{(totalService ? totalService : 0) | number}}</h4>
                </div>
                <div class="w-30 d-flex flex-column text-center border border-secondary rounded py-2">
                    <span>TIỀN MẶT</span>
                    <h4>{{(reportValue ? reportValue.balance : 0) | number}}</h4>
                </div>
            </div>
            <div class="h-40 w-100 d-flex justify-content-between my-3">
                <div class="w-30 d-flex flex-column text-center border border-secondary rounded py-2">
                    <span>LABO TỚI HẸN/ NHẬN</span>
                    <h4>{{laboOrderReport ? laboOrderReport.laboReceived : 0}}/{{laboOrderReport ? laboOrderReport.laboAppointment : 0}}
                    </h4>
                </div>
                <div class="w-30 d-flex flex-column text-center border border-secondary rounded py-2">
                    <span>KHÁCH MỚI/ CŨ</span>
                    <h4>{{customerReport ? customerReport.customerNew : 0}}/{{customerReport ? customerReport.customerOld : 0}}
                    </h4>
                </div>
                <div class="w-30 d-flex flex-column text-center border border-secondary rounded py-2">
                    <span>TỔNG LỊCH HẸN/ ĐÃ TỚI</span>
                    <h4>{{appointmentStateCount.all ? appointmentStateCount.all : 0}}/{{appointmentStateCount.done ? appointmentStateCount.done : 0}}
                    </h4>
                </div>
            </div>
        </div>
    </div>
    <div class="w-100 h-65 pt-2">
        <div class="d-flex flex-column h-100 overflow-hidden">
            <div class="h-12 d-flex justify-content-between align-items-center mb-2">
                <h4 class="font-weight-bold">DỊCH VỤ TRONG NGÀY</h4>
            </div>
            <kendo-grid class="h-88" [kendoGridBinding]="gridView" [sortable]="true" [pageSize]="limit" [skip]="offset"
                (dataStateChange)="dataStateChange($event)" [pageable]="true" [loading]="loading"
                (pageChange)="pageChange($event)">
                <ng-template kendoGridToolbarTemplate>
                    <div class="d-flex w-100">
                        <div class="input-group w-50">
                            <div class="input-group-prepend">
                                <span class="input-group-text" id="basic-addon1"><i class="fas fa-search"></i></span>
                            </div>
                            <input type="text" class="form-control" kendoTextBox (input)="onFilter($event.target.value)"
                                placeholder="Tìm kiếm theo tên khách hàng, bác sĩ ..." aria-label="Username"
                                aria-describedby="basic-addon1">
                        </div>
                        <button kendoGridExcelCommand type="button" class="ml-3 btn float-right btn-primary btn-sm"><i
                                class="far fa-file-excel"></i> Xuất Excel</button>
                    </div>
                </ng-template>
                <kendo-grid-column [headerClass]="{'text-center font-weight-bold':true}" field="order.name"
                    title="Phiếu điều trị" class="text-center" width="170">
                    <ng-template kendoGridCellTemplate let-dataItem>
                        <a class="text-primary cursor-pointer" title="Chuyển đến phiếu điều trị "
                            (click)="redirectSaleOrder(dataItem.order)">{{dataItem.order.name}}</a>
                    </ng-template>
                </kendo-grid-column>
                <kendo-grid-column [headerClass]="{'font-weight-bold':true}" field="orderPartner.displayName"
                    title="Khách hàng">
                </kendo-grid-column>
                <kendo-grid-column [headerClass]="{'font-weight-bold':true}" field="employee.name" title="Bác sĩ"
                    width="170">
                </kendo-grid-column>
                <kendo-grid-column [headerClass]="{'font-weight-bold':true}" field="teeth" title="Răng" width="170">
                    <ng-template kendoGridCellTemplate let-dataItem>
                        <span class="font-weight-bold" *ngFor="let teeth of dataItem.teeth">{{teeth.name}} </span>
                    </ng-template>
                </kendo-grid-column>
                <kendo-grid-column [headerClass]="{'font-weight-bold':true}" field="diagnostic" title="Chuẩn đoán"
                    width="170">
                </kendo-grid-column>
                <kendo-grid-column [headerClass]="{'font-weight-bold':true}" field="name" title="Dịch vụ">
                </kendo-grid-column>
                <kendo-grid-column [headerClass]="{'font-weight-bold':true}" field="priceSubTotal" class="text-right"
                    title="Thành tiền" width="170">
                    <ng-template kendoGridCellTemplate let-dataItem>
                        {{dataItem.priceSubTotal | number}}
                    </ng-template>

                </kendo-grid-column>
                <kendo-grid-column [headerClass]="{'font-weight-bold':true}" field="amount" class="text-right"
                    title="Thanh toán" width="170">
                    <ng-template kendoGridCellTemplate let-dataItem>
                        {{(dataItem.priceSubTotal - dataItem.amountResidual) | number}}
                    </ng-template>
                </kendo-grid-column>
                <kendo-grid-column [headerClass]="{'font-weight-bold':true}" class="text-right" field="amountResidual"
                    title="Còn lại" width="170">
                    <ng-template kendoGridCellTemplate let-dataItem>
                        {{dataItem.amountResidual | number}}
                    </ng-template>
                </kendo-grid-column>

                <kendo-grid-column class="text-center" [headerClass]="{'text-center font-weight-bold':true}"
                    field="order.state" title="Trạng thái" width="150">
                    <ng-template kendoGridCellTemplate let-dataItem>
                        <span *ngIf="dataItem.order.state=='sale'">
                            Đang điều trị
                        </span>
                        <span *ngIf="dataItem.order.state=='done'">
                            Hoàn thành
                        </span>
                    </ng-template>
                </kendo-grid-column>
                <kendo-grid-excel fileName="Danh_sach_dich_vu.xlsx"></kendo-grid-excel>
            </kendo-grid>
        </div>
    </div>
</div>