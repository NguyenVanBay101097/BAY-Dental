<a [ngbPopover]="popContent" popoverClass="width-xxl" [autoClose]="'outside'" [popoverTitle]="popTitle" #popOver="ngbPopover" placement="left" data-container="body" triggers="manual" (click)="toggleWithTeeth(popOver)">
    <span *ngFor="let teeth of teethSelected" class="badge badge-primary mr-1">{{teeth.name}}</span>
    <!-- <span *ngFor="let teeth of teethSelected" style="position: relative;">
        <span style="font-size: 11px; position: absolute; color: white; left:
            3px;">{{teeth.name}}</span>
        <i class="fas fa-tooth text-info mr-1" style="font-size: 20px;"></i>
    </span> -->
    <span *ngIf="!teethSelected || teethSelected.length ==0">
        <i class="fas fa-tooth text-info"></i>
    </span>

</a>

<ng-template #popTitle>
    <div class=" d-flex align-items-center d-inline-block">
        <!-- <span>Loại răng</span>
        <kendo-combobox [data]="filteredToothCategories" [textField]="'name'" [popupSettings]="{appendTo: 'component'}" [filterable]="true" formControlName="toothCategory" class="btn-sm" (valueChange)="onChangeToothCategory($event)" #toothCategoryCbx [valueField]="'id'">
        </kendo-combobox> -->
        <h4>Răng, Chuẩn đoán</h4>
        <button type="button" class="close ml-auto" (click)="popOver.close()" tabindex="-1">×</button>

    </div>
</ng-template>

<ng-template #popContent>
    <div class="form-group row">
        <label class="col-sm-3 col-form-label"><h6>Loại răng</h6></label>
        <div class="col-sm-9" [formGroup]="formGroup">
            <!-- <kendo-combobox [data]="filteredToothCategories" [textField]="'name'" [popupSettings]="{appendTo: 'component'}" [filterable]="true" formControlName="toothCategory" class="btn-sm" (valueChange)="onChangeToothCategory($event)" #toothCategoryCbx [valueField]="'id'">
            </kendo-combobox> -->
            <div *ngFor="let item of filteredToothCategories; let i = index" class="form-check form-check-inline" style="vertical-align: -webkit-baseline-middle;">
                <input (change)="onChangeToothCategory(item)" [checked]="item.name === 'Răng vĩnh viễn'" class="form-check-input" type="radio" name="toothCategory" [id]="'toothCategory' + i" [value]="item.id">
                <label class="form-check-label" [for]="'toothCategory' + i">{{item.name}}</label>
            </div>
        </div>
    </div>
    <div class="form-group row">
        <label class="col-sm-3 col-form-label"><h6>Chuẩn đoán</h6></label>
        <div class="col-sm-9">
            <input type="text" class="form-control" [(ngModel)]="line.diagnostic">
        </div>
    </div>
    <div class="d-inline-flex w-100">
        <h5 class="w-80">Răng</h5>
        <button (click)="onSave()" *ngIf="line.get('state') && line.get('state').value == 'sale'" class="btn btn-sm btn-primary ">Xác nhận</button>
    </div>
    <div class="teeth-map">
        <table class="table">
            <tr *ngFor="let ham of hamList | keyvalue">
                <td [ngClass]="{'text-right': vitri.key === '0_right'}" *ngFor="let vitri of ham.value | keyvalue">
                    <div (click)="onSelected(rang)" class="tooth-item" [ngClass]="{'selected': isSelected(rang)}" *ngFor="let rang of vitri.value">
                        {{rang.name}}
                    </div>
                </td>
            </tr>
        </table>
    </div>
</ng-template>