
<div class="card">
    <div class="card-body flex-1-1-100 right p-2 ml-2 d-flex flex-column">
        <h5 class="flex-0-0-auto">Báo cáo theo giờ tiếp nhận</h5>
        <div class="flex-0-0-auto mb-2">
            <div class="filter d-flex flex-wrap mb-2">
                <app-date-range-picker-filter [opens]="'right'" class="mr-1" [startDate]="dateFrom" [endDate]="dateTo"
                    (searchChange)="onSearchDateChange($event)"></app-date-range-picker-filter>
                <kendo-combobox width="auto" [placeholder]="'Tất cả chi nhánh'" class="mr-1" [valueField]="'id'"
                    [textField]="'name'" [filterable]="true" [data]="listCompany"
                    (selectionChange)="onSelectCompany($event)" #companyCbx>
                </kendo-combobox>
                 <div class="dropdown mr-1">
      <button
        class="btn btn-primary dropdown-toggle"
        type="button"
        id="dropdownMenuButton"
        data-toggle="dropdown"
        aria-haspopup="true"
        aria-expanded="false"
      >
        <i class="fas fa-download"></i> Xuất File
      </button>
      <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
        <a class="dropdown-item" (click)="onExcelExport()">Xuất Excel</a>
        <a class="dropdown-item" (click)="onExportPDF()">Xuất PDF</a>
      </div>
    </div>
            </div>
            <div>
                <kendo-chart class="mh-chart-year p-2">
                    <kendo-chart-title color="blue" text="BÁO CÁO THEO GIỜ TIẾP NHẬN">
                    </kendo-chart-title>                   
                    <kendo-chart-legend position='bottom' orientation='horizontal'></kendo-chart-legend>
                    <kendo-chart-series>
                        <ng-container *ngIf="customerReceiptTimes.length > 0">
                            <kendo-chart-series-item type="column" [data]="customerReceiptTimes" field="timeRangeCount"
                                categoryField="timeRange" [style]="'smooth'">
                                <kendo-chart-series-item-tooltip>
                                    <ng-template let-dataItem="dataItem">
                                        <b>{{dataItem.timeRange}}</b>:
                                        <b> Số lượng: {{dataItem.timeRangeCount || 0 | number }} </b>
                                    </ng-template>
                                </kendo-chart-series-item-tooltip>
                            </kendo-chart-series-item>
                        </ng-container>
                    </kendo-chart-series>
                </kendo-chart>
            </div>
        </div>
        <kendo-grid #grid [data]="gridData" [pageSize]="limit" [skip]="skip" [pageable]="true" [loading]="loading"
            (pageChange)="pageChange($event)">
            <kendo-grid-column title="Giờ tiếp nhận" width="150">
                <ng-template kendoGridCellTemplate let-dataItem>
                    {{dataItem.timeRange}}
                </ng-template>
            </kendo-grid-column>
            <kendo-grid-column title="Số lượng" width="150">
                <ng-template kendoGridCellTemplate let-dataItem>
                    {{dataItem.timeRangeCount | number}}
                </ng-template>
            </kendo-grid-column>
            <div *kendoGridDetailTemplate="let dataItem" width="50">
                <app-customer-receipt-report-for-time-detail [itemTime]="dataItem" [dateFrom]="dateFrom"
                    [dateTo]="dateTo" [companyId]="companyId"></app-customer-receipt-report-for-time-detail>
            </div>
            <ng-template kendoPagerTemplate let-skip="skip" let-total="total" let-pageSize="pageSize">
                <kendo-pager-prev-buttons></kendo-pager-prev-buttons>
                <kendo-pager-numeric-buttons [buttonCount]="10"></kendo-pager-numeric-buttons>
                <kendo-pager-next-buttons></kendo-pager-next-buttons>
                <kendo-pager-info></kendo-pager-info>
                <span class="ml-4">
                    <kendo-dropdownlist style="width: 80px;" [data]="pageSizes"
                        (valueChange)="onPageSizeChange($event)" [value]="limit">
                    </kendo-dropdownlist>
                    <label class="ml-2 mb-0">Số dòng trên trang</label>
                </span>
            </ng-template>
        </kendo-grid>
    </div>
</div>