<div class="h-100 w-100 px-3 py-3 overflow-auto" [formGroup]="formGroup">

    <div class="h-50 w-100 mh-header">
        <div class="header border border-secondary rounded">
            <div class="header-title">
                BÁO CÁO TỔNG QUAN
            </div>
            <div class="header-filter">
                <kendo-combobox class="form-control" [data]="filteredCompanies" [textField]="'name'" [filterable]="true"
                    #companyCbx formControlName="company" [valueField]="'id'" [placeholder]="'Tất cả chi nhánh'">
                </kendo-combobox>
            </div>
        </div>
        <div class="content">
            <div class="content-left pr-3">
                <div class="border border-secondary rounded bg-white w-100 h-100 overflow-hidden">
                    <kendo-chart
                        *ngIf="reportCurrentYear && reportOldYear && reportOldYear.length > 0 && reportCurrentYear.length > 0"
                        class=" pl-3 pr-3" class="w-100 h-100">
                        <kendo-chart-title color="black" text="BIỂU ĐỒ DOANH THU NĂM SO VỚI CÙNG KỲ">
                        </kendo-chart-title>
                        <kendo-chart-legend position='bottom' orientation='horizontal'></kendo-chart-legend>
                        <!-- <kendo-chart-tooltip format='{0} VNĐ'></kendo-chart-tooltip> -->
                        <kendo-chart-series>
                            <kendo-chart-series-item type="line" [data]="reportOldYear" field="data"
                                categoryField="month" [style]="'smooth'" [name]="oldYear">
                                <kendo-chart-series-item-tooltip>
                                    <ng-template let-dataItem="dataItem">
                                        Doanh thu tháng <b>{{dataItem.month}}/{{dataItem.year}}</b>:
                                        <b> {{(dataItem.data ? dataItem.data : 0) | number }} VNĐ</b>
                                    </ng-template>
                                </kendo-chart-series-item-tooltip>
                            </kendo-chart-series-item>
                            <kendo-chart-series-item type="line" [data]="reportCurrentYear" field="data"
                                [dashType]="longDash" categoryField="month" [style]="'smooth'" [name]="currentYear">
                                <kendo-chart-series-item-tooltip>
                                    <ng-template let-dataItem="dataItem">
                                        Doanh thu tháng <b>{{dataItem.month}}/{{dataItem.year}}</b>:
                                        <b> {{(dataItem.data ? dataItem.data : 0) | number }} VNĐ</b>
                                    </ng-template>
                                </kendo-chart-series-item-tooltip>
                            </kendo-chart-series-item>
                        </kendo-chart-series>
                    </kendo-chart>
                </div>
            </div>
            <div class="content-right pt-3 pl-3">
                <div class="content-right-child pb-3 d-flex">
                    <div class="w-50 h-100 pr-3">
                        <div class="w-100 h-100 bg-white p-3 text-center border border-secondary rounded">
                            <div class="text-top font-weight-bold">CÔNG NỢ NCC</div>
                            <div class="text-bottom font-weight-bold text-danger">
                                {{(totalDebitNCC ? totalDebitNCC : 0 ) | number}}</div>
                        </div>
                    </div>
                    <div class="w-50 h-100 pl-3">
                        <div class="w-100 h-100 bg-white p-3 text-center border border-secondary rounded">
                            <div class="text-top font-weight-bold">PHẢI THU</div>
                            <div class="text-bottom font-weight-bold text-danger">
                                {{(totalDebitCustomer ? totalDebitCustomer : 0) | number}}</div>
                        </div>
                    </div>
                </div>
                <div class="content-right-child pb-3">
                    <div class="h-100 w-100  text-center bg-white p-2 border border-secondary rounded">
                        <div class=" w-100 h-30 font-weight-bold">BÁO CÁO TIỀN MẶT - NGÂN HÀNG
                        </div>
                        <div class=" w-100 h-70 d-flex">
                            <div class="w-50 h-100 border-right">
                                <div class="w-100 h-100  text-center">
                                    <div class="text-top font-weight-bold">TIỀN MẶT</div>
                                    <div class="text-bottom font-weight-bold text-primary">
                                        {{(moneyledger ? moneyledger : 0) | number}}</div>
                                </div>
                            </div>
                            <div class="w-50 h-100">
                                <div class="w-100 h-100  text-center">
                                    <div class="text-top font-weight-bold">NGÂN HÀNG</div>
                                    <div class="text-bottom font-weight-bold text-primary">
                                        {{(moneyBank ? moneyBank : 0) | number}}</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="content-right-child pb-3">
                    <div class="h-100 w-100  text-center bg-white p-2 border border-secondary rounded">
                        <div class=" w-100 h-30 font-weight-bold">BÁO CÁO KHÁCH HÀNG CŨ - MỚI
                        </div>
                        <div class=" w-100 h-70 d-flex">
                            <div class="w-50 h-100 border-right">
                                <div class="w-100 h-100  text-center">
                                    <div class="text-top font-weight-bold">KHÁCH HÀNG CŨ</div>
                                    <div class="text-bottom font-weight-bold text-primary">
                                        {{customerReport ? customerReport.customerOld : 0}}</div>
                                </div>
                            </div>
                            <div class="w-50 h-100">
                                <div class="w-100 h-100  text-center">
                                    <div class="text-top font-weight-bold">KHÁCH HÀNG MỚI</div>
                                    <div class="text-bottom font-weight-bold text-primary">
                                        {{customerReport ? customerReport.customerNew : 0}}</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="h-50 w-100">
        <kendo-chart>
            <kendo-chart-title text="BÁO CÁO DOANH THU THEO NGÀY"></kendo-chart-title>
            <kendo-chart-category-axis>
                <kendo-chart-category-axis-item
                    [categories]="['1', '2', '3', '4', '5', '6', '7','8', '9', '10', '11', '12', '13', '14','15', '16', '17', '18', '19', '20', '21','22', '23', '24', '25','26', '27', '28', '29', '30', '31']"
                    [title]="{ text: 'Ngày' }">
                </kendo-chart-category-axis-item>
            </kendo-chart-category-axis>
            <kendo-chart-series>
                <kendo-chart-series-item type="column"
                    [data]="[123, 276, 310, 212, 240, 156, 98, 310, 212, 240, 156, 98, 310, 212, 240, 156, 98, 310, 212, 240, 156, 98, 310, 212, 240, 156, 98, 310, 212, 240, 156]">
                </kendo-chart-series-item>
            </kendo-chart-series>
        </kendo-chart>
    </div>
    <div class="h-50 w-100 mh-body">
        <div class="header border border-secondary rounded">
            <div class="header-title">
                BÁO CÁO THEO THÁNG
            </div>
            <div class="header-filter">
                <kendo-combobox class="form-control" [data]="filteredCompanies" [textField]="'name'" [filterable]="true"
                    #companyCbx formControlName="company" [valueField]="'id'">
                </kendo-combobox>
            </div>
        </div>

        <div class="content">
            
            <div class="h-50 w-100">
                <div class="content-shape pr-3 pt-3">
                    <div class="w-100 h-100 bg-white border border-secondary rounded p-3">
                        <div class=" w-100 h-30 font-weight-bold">BÁO CÁO KẾT QUẢ KINH DOANH
                        </div>
                        <div class=" w-100 h-70 d-flex">
                            <div class="w-50 h-100 border-right">
                                <div class="w-100 h-100  text-center">
                                    <div class="text-top font-weight-bold">DOANH THU</div>
                                    <div class="text-bottom font-weight-bold text-primary">
                                        {{(totalDoanhThu ? totalDoanhThu : 0) | number}}</div>
                                </div>
                            </div>
                            <div class="w-50 h-100">
                                <div class="w-100 h-100  text-center">
                                    <div class="text-top font-weight-bold">CHI PHÍ</div>
                                    <div class="text-bottom font-weight-bold text-primary">
                                        {{(totalChiPhi ? totalChiPhi : 0) | number}}</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="content-shape pr-3 pt-3">
                    <div class="w-100 h-100 bg-white border border-secondary rounded p-3">
                        <div class=" w-100 h-30 font-weight-bold">BÁO CÁO CÔNG NỢ NCC
                        </div>
                        <div class=" w-100 h-70 d-flex">
                            <div class="w-50 h-100 border-right">
                                <div class="w-100 h-100  text-center">
                                    <div class="text-top font-weight-bold">PHÁT SINH</div>
                                    <div class="text-bottom font-weight-bold text-primary">
                                        {{(totalDebitNCCByMonth ? totalDebitNCCByMonth : 0) | number}}</div>
                                </div>
                            </div>
                            <div class="w-50 h-100">
                                <div class="w-100 h-100  text-center">
                                    <div class="text-top font-weight-bold">THANH TOÁN</div>
                                    <div class="text-bottom font-weight-bold text-primary">
                                        {{(totalCreditNCCByMonth ? totalCreditNCCByMonth : 0) | number}}</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="h-50 w-100 ">
                <div class="content-shape pl-3 pt-3">
                    <div class="w-100 h-100 bg-white border border-secondary rounded p-3">
                        <div class=" w-100 h-30 font-weight-bold">BÁO CÁO THU CHI
                        </div>
                        <div class=" w-100 h-70 d-flex">
                            <div class="w-50 h-100 border-right">
                                <div class="w-100 h-100  text-center">
                                    <div class="text-top font-weight-bold">THỰC THU</div>
                                    <div class="text-bottom font-weight-bold text-primary">
                                        {{(totalThu ? totalThu : 0) | number}}</div>
                                </div>
                            </div>
                            <div class="w-50 h-100">
                                <div class="w-100 h-100  text-center">
                                    <div class="text-top font-weight-bold">THỰC CHI</div>
                                    <div class="text-bottom font-weight-bold text-primary">
                                        {{(totalChi ? totalChi : 0) | number}}</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="content-shape pl-3 pt-3 d-flex">
                    <div class="content-shape-child  pr-3">
                        <div class="w-100 h-100 bg-white border border-secondary rounded p-3">
                            <div class=" w-100 h-30">
                            </div>
                            <div class=" w-100 h-70 d-flex">
                                <div class="w-100 h-100 text-center">
                                    <div class="text-top font-weight-bold">HOA HỒNG ĐIỀU TRỊ</div>
                                    <div class="text-bottom font-weight-bold text-primary">
                                        {{ (totalHoaHong ? totalHoaHong : 0) | number}}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- <div class="content-shape-child pl-3">
                        <div class="w-100 h-100 bg-white border border-secondary rounded p-3">
                            <div class=" w-100 h-30">
                            </div>
                            <div class=" w-100 h-70 d-flex">
                                <div class="w-100 h-100 text-center">
                                    <div class="text-top font-weight-bold">CHI PHÍ LABO</div>
                                    <div class="text-bottom font-weight-bold text-primary">400000</div>
                                </div>
                            </div>
                        </div>
                    </div> -->
                </div>
            </div>
        </div>
    </div>
</div>