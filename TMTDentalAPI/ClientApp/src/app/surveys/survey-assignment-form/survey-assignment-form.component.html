<div class="o_cp_controller">
    <div class="o_control_panel o_breadcrumb_full">
        <ol class="breadcrumb">
            <li>
                <a [routerLink]="['/surveys']">
                    <span>Danh sách khảo sát</span>
                </a>
            </li>
            <li class="active">
                <span *ngIf="id">{{surveyAssignment.saleOrder.partner.name}}</span>
            </li>
        </ol>
        <div class="o_cp_left">
            <!-- <div class="o_cp_buttons">
                <div class="o_form_buttons_view">
                    <button type="button" class="btn btn-primary btn-sm" >
                        Liên hệ</button>
                    <button type="button" class="btn btn-secondary btn-sm"  
                        *ngIf="id">
                      Khảo sát</button>
                </div>
            </div> -->
        </div>
        <div class="o_cp_right">
            <!-- <div class="dropdown">
                <button class="btn btn-secondary btn-sm dropdown-toggle" *ngIf="id" data-toggle="dropdown"
                    aria-haspopup="true" aria-expanded="false" type="button" id="dropdownMenuButton">
                    Thao tác
                </button>
                <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                    <a *ngIf="id" class="dropdown-item" (click)="printpurchaseOrder()">In phiếu</a>
                </div>
            </div> -->
        </div>
    </div>
</div>

<div class="o_content">
    <form class="o_form_view" [formGroup]="formGroup">
        <div class="o_form_sheet_bg">
            <div class="o_form_statusbar">
                <div class="o_statusbar_buttons">
                    <button type="button" class="btn btn-primary btn-sm" >
                        Liên hệ
                    </button>
                    <button type="button" class="btn btn-primary btn-sm">
                        Khảo sát
                    </button>
                    <!-- <button *ngIf="['purchase'].indexOf(purchaseOrder.state) !== -1" type="button"
                        class="btn btn-danger btn-sm" (click)="buttonCancel()">
                        Hủy đơn
                    </button> -->
                </div>
                <div class="o_statusbar_status o_field_widget o_readonly_modifier">
                    <button [disabled]="surveyAssignment.status !== 'done'" class="btn o_arrow_button disabled"
                        [ngClass]="{'btn-primary': surveyAssignment.status === 'done', 'btn-secondary': surveyAssignment.status !== 'done'}"
                        type="button">
                        Hoàn thành
                    </button>
                    <button [disabled]="surveyAssignment.status !== 'contact'" class="btn o_arrow_button disabled"
                        [ngClass]="{'btn-primary': surveyAssignment.status === 'contact', 'btn-secondary': surveyAssignment.status !== 'contact'}"
                        type="button">
                        Đang liên hệ
                    </button>
                    <button *ngIf="surveyAssignment.status === 'draft'" [disabled]="surveyAssignment.status !== 'draft'"
                        class="btn o_arrow_button disabled"
                        [ngClass]="{'btn-primary': surveyAssignment.status === 'draft', 'btn-secondary': surveyAssignment.status !== 'draft'}"
                        type="button">
                        Chưa gọi
                    </button>
                </div>
            </div>
            <div class="o_form_sheet">
                <div class="oe_title">
                    <h5>
                        <span>THÔNG TIN KHÁCH HÀNG</span>
                    </h5>
                </div>
                <div class="media mb-3">
                    <app-image-file-upload [supportWebcam]="true" class="t_avatar"
                        [imageId]="surveyAssignment.saleOrder.partner?.avatar" [width]="100" [height]="100">
                    </app-image-file-upload>
                    <div class="media-body">
                        <h3>{{surveyAssignment.saleOrder.partner? surveyAssignment.saleOrder.partner.name: ''}}</h3>
                        <div class="t_sub_title">
                            Mã khách hàng: {{surveyAssignment.saleOrder.partner ? surveyAssignment.saleOrder.partner.ref
                            : ''}} <br /> Ngày tạo: {{surveyAssignment.saleOrder.partner ?
                            (surveyAssignment.saleOrder.partner.date | date:'shortDate') : '' }}
                        </div>
                    </div>
                </div>
                <div class="o_group">
                    <table class="o_group o_inner_group o_group_col_6">
                        <tbody>
                            <tr>
                                <td colspan="1" class="o_td_label">
                                    <label class="o_form_label o_form_label_help">
                                        Giới tính
                                    </label>
                                </td>
                                <td colspan="1" style="width: 100%;">
                                    {{surveyAssignment.saleOrder.partner.genderConvertcom}}
                                </td>
                            </tr>
                            <tr>
                                <td colspan="1" class="o_td_label">
                                    <label class="o_form_label o_form_label_help">
                                        Ngày sinh:
                                    </label>
                                </td>
                                <td colspan="1" style="width: 100%;">
                                    {{surveyAssignment.saleOrder.partner.dateOfBirth}}
                                </td>
                            </tr>
                            <tr>
                                <td colspan="1" class="o_td_label">
                                    <label class="o_form_label o_form_label_help">
                                        Nghề nghiệp
                                    </label>
                                </td>
                                <td colspan="1" style="width: 100%;">
                                    {{surveyAssignment.saleOrder.partner.jobTitle}}
                                </td>
                            </tr>
                            <tr>
                                <td colspan="1" class="o_td_label">
                                    <label class="o_form_label o_form_label_help">
                                        Tiểu sử bệnh
                                    </label>
                                </td>
                                <td colspan="1" style="width: 100%;">
                                    {{surveyAssignment.saleOrder.partner.historiesString}}
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="o_group o_inner_group o_group_col_6">
                        <!-- <tbody>
                        <tr>
                            <td colspan="1" class="o_td_label">
                                <label class="o_form_label o_form_label_help">
                                    Ngày lập phiếu
                                </label>
                            </td>
                            <td colspan="1" style="width: 100%;">
                                <kendo-datetimepicker [class.d-none]="saleOrder.state != 'draft'"
                                    formControlName="dateOrderObj">
                                </kendo-datetimepicker>
                                <span
                                    [class.d-none]="saleOrder.state == 'draft'">{{saleOrder.dateOrder | date: 'short'}}</span>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="1" class="o_td_label">
                                <label class="o_form_label">
                                    Phương thức thanh toán
                                </label>
                            </td>
                            <td colspan="1" style="width: 100%;">
                                <span
                                [class.d-none]="saleOrder.state == 'draft'">{{saleOrder.journal?.name }}</span>
                                <kendo-combobox [data]="filteredJournals" [textField]="'name'" [filterable]="true" [class.d-none]="saleOrder.state != 'draft'"
                                    #journalCbx formControlName="journal" [valueField]="'id'">
                                </kendo-combobox>
                                <div *ngIf="f.journal.errors && (f.journal.touched || f.journal.dirty || submitted)" class="text-danger">
                                    <div *ngIf="f.journal.errors.required">Chọn phương thức thanh toán</div>
                                </div>
                            </td>
                        </tr>
                    </tbody> -->
                    </table>
                </div>

            </div>
        </div>
    </form>
</div>