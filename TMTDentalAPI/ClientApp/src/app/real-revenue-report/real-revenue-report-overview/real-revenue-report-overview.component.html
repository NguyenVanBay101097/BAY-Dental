<div class="o_cp_controller">
    <div class="o_control_panel">
        <ol class="breadcrumb">
            <li class="active">
                Thống kê tình hình thu nợ khách hàng
            </li>
        </ol>
        <div class="o_cp_searchview">
        </div>
        <div class="o_cp_left">
            <div class="o_cp_buttons">
            </div>
            <div class="o_cp_sidebar">
            </div>
        </div>
        <div class="o_cp_right">
        </div>
    </div>
</div>

<div class="container bg-white my-3">
    <div class="o_form_view o_form_nosheet o_form_editable">
        <div class="o_group" [formGroup]="formGroup">
            <table class="o_group o_inner_group o_group_col_6">
                <tbody>
                    <tr>
                        <td colspan="1" class="o_td_label">
                            <label class="o_form_label">
                                Ngày bắt đầu
                            </label>
                        </td>
                        <td colspan="1" style="width: 100%;">
                            <kendo-datepicker class="form-control" formControlName="dateFrom"></kendo-datepicker>
                        </td>

                    </tr>
                    <tr>
                        <td colspan="1" class="o_td_label">
                            <label class="o_form_label">
                                Ngày kết thúc
                            </label>
                        </td>
                        <td colspan="1" style="width: 100%;">
                            <kendo-datepicker class="form-control" formControlName="dateTo"></kendo-datepicker>
                        </td>
                    </tr>

                </tbody>
            </table>
            <table class="o_group o_inner_group o_group_col_6">
                <tbody>
                    <tr hasGroups [groups]="'base.group_multi_company'">
                        <td colspan="1" class="o_td_label">
                            <label for="o_field_input_10" class="o_form_label o_form_label_help">
                                Chi nhánh
                            </label>
                        </td>
                        <td colspan="1" style="width: 100%;">
                            <kendo-combobox [data]="filteredCompanies" [placeholder]="'Tất cả chi nhánh'"
                                [textField]="'name'" [filterable]="true" #companyCbx formControlName="company"
                                [valueField]="'id'">
                            </kendo-combobox>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="mb-2">
            <button type="button" class="btn btn-primary btn-sm" (click)="loadDataFromApi()">Báo cáo</button>
        </div>
        <div class="text-center" *ngIf="loading">
            <div class="spinner-border text-primary text-center" role="status">
              <span class="sr-only">Loading...</span>
            </div>
        </div>
        <div *ngIf="reportResult">
            <div class="row">
                <div class="col-3">
                    <div>
                        <div class="text-muted">Đầu kỳ còn phải thu</div>
                        <h4 class="text-success">{{reportResult.begin | number}}</h4>
                    </div>
                </div>
                <div class="col-3">
                    <div>
                        <div class="text-muted">Thu phát sinh trong kỳ</div>
                        <h4 class="text-success">{{reportResult.debit | number}}</h4>
                    </div>
                </div>
                <div class="col-3">
                    <div>
                        <div class="text-muted">Đã thu trong kỳ</div>
                        <h4 class="text-success">{{reportResult.credit | number}}</h4>
                    </div>
                </div>
                <div class="col-3">
                    <div>
                        <div class="text-muted">Cuối kỳ còn phải thu</div>
                        <h4 class="text-success">{{reportResult.end | number}}</h4>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>