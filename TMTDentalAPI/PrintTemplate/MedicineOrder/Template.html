<div class="d-flex mb-2">
    {{ if o.company.logo != "" && o.company.logo != null}}
    <img class="img-fluid me-3 w-20" src="{{o.company.logo}}" alt="{{o.company.name}}">
    {{ end }}

<div>
    <div class="text-xl font-semibold">{{o.company.name}}</div>
    {{if o.company.address != ""}}

    <div>Địa chỉ: {{o.company.address}}</div>

    {{ end }}

    {{ if o.company.phone}}

    <div>ĐT: {{o.company.phone}}</div>

    {{ end }}

    {{if o.company.email }}

<div>Email: {{o.company.email}}</div>

    {{ end }}

</div>
</div>

<div class="text-center mb-2">
    <div class="text-3xl font-semibold">HÓA ĐƠN THUỐC</div>
    <div>Ngày {{o.order_date.day}} tháng {{o.order_date.month}} năm {{o.order_date.year}} </div>
    <div class="font-semibold">Số: {{o.name}}</div>
</div>
<div class="o_form_view mb-2">
    <div class="d-flex">
        <table class="o_group o_inner_group">
            <tbody>
                <tr>
                    <td colspan="1" class="o_td_label">
                        <label class="o_form_label o_form_label_help">
                            Khách hàng
                        </label>
                    </td>
                    <td colspan="1" style="width: 100%;">{{o.partner.name}}</td>
                </tr>
                <tr>
                    <td colspan="1" class="o_td_label">
                        <label class="o_form_label o_form_label_help">
                            Địa chỉ
                        </label>
                    </td>
                    <td colspan="1" style="width: 100%;">
                        {{o.partner.address}}
                    </td>
                </tr>
                <tr>
                    <td colspan="1" class="o_td_label">
                        <label class="o_form_label o_form_label_help">
                            Bác sĩ
                        </label>
                    </td>
                    <td colspan="1" style="width: 100%;">
                        {{o.employee?.name}}
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
<div class="o_form_view mb-2">
    <table class="table table-sm table-bordered mb-0">
    </table>

    <table class="table table-sm table-bordered mb-0 table-border-top-0">
        <thead>
            <tr>
                <th>Tên thuốc</th>
                <th class="text-center">Số lượng</th>
                <th class="text-center">Đơn giá</th>
                <th class="text-right">Thành tiền</th>
            </tr>
        </thead>
        <tbody>
            <!--{{ for line in  o.medicine_order_lines }}-->
            <tr>
                <td style="">
                    <div class="font-semibold">{{line.product.name}}</div>
                    <i>
                        Ngày uống {{line.toa_thuoc_line.number_of_times | math.format "#,###.##" "vi"}} lần,
                        mỗi lần {{line.toa_thuoc_line.amount_of_times | math.format "#,###.##" "vi"}} {{line.product.uo_m.name}},
                        {{line.toa_thuoc_line.use_at_display}}
                    </i>
                </td>
                <td class="text-center">{{line.quantity | math.format "#,###.##" "vi"}}</td>
                <td class="text-center">{{line.price | math.format "#,###.##" "vi"}}</td>
                <td class="text-right">{{line.amount_total | math.format "#,###.##" "vi"}}</td>
            </tr>
            <!--{{ end }}-->
        </tbody>

    </table>
</div>
<div class="o_form_view float-right mb-2">
    <div class="d-flex">
        <div>
            <table class="o_group o_inner_group">
                <tbody>
                    <tr>
                        <td colspan="1" class="o_td_label">
                            <label class="o_form_label o_form_label_help">
                                Tổng tiền
                            </label>
                        </td>
                        <td class="pe-0 text-right font-semibold" colspan="1" style="width: 100%;">{{o.amount | math.format "#,###.##" "vi"}}</td>
                    </tr>
                    <tr>
                        <td colspan="1" class="o_td_label">
                            <label class="o_form_label o_form_label_help">
                                Thanh toán
                            </label>
                        </td>
                        <td class="pe-0 text-right font-semibold" colspan="1" style="width: 100%;">
                            {{o.account_payment ? (o.account_payment.amount | math.format "#,###.##" "vi") : 0}}
                        </td>
                    </tr>
                    <tr>
                        <td colspan="1" class="o_td_label">
                            <label class="o_form_label o_form_label_help">
                                Còn lại
                            </label>
                        </td>
                        <td class="pe-0 text-right font-semibold" colspan="1" style="width: 100%;">
                            {{o.amount - (o.account_payment == null ? 0 : o.account_payment.amount) | math.format "#,###.##" "vi"}}
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

</div>
<div class="clearfix"></div>
<div class="">
    <div class="o_form_view">
        <table class="o_group o_inner_group">
            <tbody>
                <tr>
                    <td style="" colspan="1" class="o_td_label">
                        <label class="o_form_label o_form_label_help">
                            Lời dặn
                        </label>
                    </td>
                    <td colspan="1" style="width: 100%;">{{o.toa_thuoc.note}}</td>
                </tr>
                <tr>
                    <td colspan="1" class="o_td_label">
                        <label class="o_form_label o_form_label_help">
                            Chẩn đoán bệnh
                        </label>
                    </td>
                    <td colspan="1" style="width: 100%;">{{o.toa_thuoc.diagnostic}}</td>
                </tr>
                <tr>
                    <td colspan="1" class="o_td_label">
                        <label class="o_form_label o_form_label_help">
                            Tái khám
                        </label>
                    </td>
                    <td colspan="1" style="width: 100%;">
                        {{o.toa_thuoc.re_examination_date ? (o.toa_thuoc.re_examination_date | date.to_string '%d/%m/%Y') : ""}}
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
<div class="d-flex mt-2">
    <div class="col">
        <div class="text-center">
            <span class="font-semibold">Người lập phiếu</span> <br />
            <i>(Ký, họ tên)</i> <br />
            <span></span> <br />
            <span></span> <br />
            <span></span> <br />
            <span class="font-semibold">
                {{o.employee.name | string.upcase }}
            </span>
        </div>
    </div>
    <div class="col">
        <div class="text-center">
            <span class="font-semibold"> Bệnh nhân</span> <br />
            <i>(Ký, họ tên)</i> <br />
            <span></span> <br />
            <span></span> <br />
            <span></span> <br />
            <span class="font-semibold">
                {{o.partner.name | string.upcase }}
            </span>
        </div>
    </div>
</div>